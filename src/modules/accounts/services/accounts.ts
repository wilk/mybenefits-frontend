import {IAccount} from "../util/interfaces";

export class Accounts {
    // @todo: remove this mockup
    private accounts: IAccount[] = [{
        id: '029js3kd',
        label: 'Auto',
        balance: 3000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'fj830kds',
        label: 'Casa',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jgh28s89',
        label: 'Alimentari',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'fj830kd0',
        label: 'Aereo',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jgh28s81',
        label: 'Auto',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'fj830kd2',
        label: 'Treno',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jgh28s83',
        label: 'Scuola',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'fj830kdx',
        label: 'Luce',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jgh28z83',
        label: 'Gas',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'xj830kd2',
        label: 'Treno',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jllh22s8',
        label: 'Acqua',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'fj120kd2',
        label: 'Treno',
        balance: 50000,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }, {
        id: 'jg12ks83',
        label: 'Rifiuti',
        balance: 12500,
        transitions: [{
            id: '0',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '1',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '2',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '3',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '4',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }, {
            id: '5',
            title: 'Test',
            date: new Date(),
            balance: 1000,
            tags: ['test', 'test3', 'test6']
        }]
    }]

    constructor(private $q, private $http, private API_URL) {}

    get(id?: string): ng.IPromise<IAccount[]|IAccount> {
        return this.$q(async function (resolve, reject) {
            try {
                let url = `${this.API_URL}/accounts`
                if (id) url += `/${id}`
                let res = await this.$http.get(url)
                
                resolve(res.data)
            }
            catch (err) {
                console.error(err)
                // reject(err)
                if (id) resolve(this.accounts.find(account => {return account.id === id}))
                else resolve(this.accounts)
            }
        }.bind(this))
    }
}